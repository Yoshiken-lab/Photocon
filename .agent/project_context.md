# プロジェクト開発ガイドライン (The Map)

このファイルは本プロジェクトの「地図」として機能します。開発におけるルール、現状、技術スタックを記録し、常に最新の状態に保つことを目的とします。

## 1. プロジェクト概要
**Kids Photo Contest**
子供向け写真コンテストのWebアプリケーション。
現在、新しいデザイン案のサンプル実装 (`/sample`) を行っています。

## 開発ルール

### コミュニケーション
- ユーザー（はるきち）とは親友のように接する（敬語不要）
- 「相談」「質問」のキーワードがある場合は勝手に進めず必ず確認する
- 仕様不明点は必ず質問する

### 実装プロセス
- **「地図」の確認と更新**: 作業前後に必ず `.agent/project_context.md` を確認・更新する
- **段階的な実装**: 大規模な変更は分割して行う
- **ガイドラインの遵守**: UI/UX実装時は `schoolphoto_design_guideline.md` を必ず参照する

### 技術的な知見・注意点
- **縦書き（vertical-rl）の実装**:
    - `writing-mode: vertical-rl` を指定したコンテナ内では、物理的な軸と論理的な軸の直感的な対応が異なる場合がある。
    - 特に `padding` や `inset` (絶対配置) を操作する際、Axisの反転に注意が必要。
    - **背景色の独立制御**: テキスト要素に直接背景色をつけると、パディング調整がテキストの位置自体に影響してしまう。テキスト位置を固定したまま背景だけを調整したい場合は、テキストと背景（`div`）を分離し、背景 `div` を `absolute` で配置してサイズを制御する手法が有効。

### デザインパターン：サンプルF（温かみ・和モダン）
※以下は「サンプルF」と定義する現在のサンプルページ（`/sample`）の実装において遵守すべきデザインルールであり、他のデザイン案を作成する際は必ずしもこの限りではない。

**1. コンセプト・雰囲気 (Sample F)**
- **「温かみ」と「思い出」**: 丸みのあるフォントや形状を使用し、デジタルっぽさを抑えてアルバムのような温かさを表現する。
- **モダン×和**: 縦書きテキストをアクセントに使い、日本の学校行事らしい情緒とモダンなWebデザインを融合させる。

**2. 実装ルール (Sample F)**
- **タイポグラフィ**:
    - **見出し・強調**: `font-maru` (Kiwi Maru) を積極的に使用し、親しみやすさを演出する。
    - **本文**: 視認性の高いゴシック体 (`Noto Sans JP`)。
- **形状（Shape）**:
    - **角丸**: コンテナやカードには `rounded-2xl` 〜 `rounded-[3rem]` など、**大きめの角丸**を基本とし、鋭角なデザインは避ける。
- **カラー運用**:
    - ベース: `bg-gray-50` (真っ白すぎない優しい背景色)
    - アクセント: ブランドオレンジ (`#E75D2E`)
    - テキスト背景: 写真上の文字などには 透過ホワイト (`bg-white/90`) をオーバーレイとして活用し、可読性と軽やかさを両立する。

### デザインパターン：サンプルF-2（アクティブ・ポップ）
※以下は「サンプルF-2」と定義する新規サンプルページ（`/sample-f2`）の実装において遵守すべきデザインルールである。

**1. コンセプト・雰囲気 (Sample F-2)**
- **「元気」と「楽しさ」**: 明るいオレンジやイエローを多用し、動的な形状（星、曲線、傾き）で子どもらしいエネルギーを表現する。
- **スクールアルバム**: ポラロイド風の写真フレームや手書き風イラストを使い、アルバムを作っているようなワクワク感を演出する。

**2. 実装ルール (Sample F-2)**
- **カラー運用**:
    - メイン: `bg-brand` (オレンジ #E75D2E) を背景色として大胆に使用。
    - アクセント: イエロー（バッジや装飾）。
    - テキスト: オレンジ背景上では `text-white`、白背景上では `text-gray-800`。
- **ビジュアルモチーフ**:
    - **ポラロイド**: 写真は白枠付き (`bg-white p-2 shadow-md`) で少し傾けて配置 (`rotate-1`, `-rotate-2` 等)。
    - **星形**: 装飾として星アイコンを散りばめる。
    - **曲線**: セクションの境界線に曲線 (`clip-path` や SVG) を使用し、動きを出す。
- **タイポグラフィ**:
    - 基本的に Sample F と同様 `font-maru` を使用するが、より太字 (`font-bold`) を多用し、ポップさを強調する。

## 3. 技術スタック

### ランディングページ (LP)
- HTML5, Tailwind CSS
- サーバー: Python `http.server` (ポート8888推奨)

### 管理システム (System)
- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Database/Auth**: Supabase
- **Icons**: Lucide Icons
- **Fonts**: Kiwi Maru, Noto Sans JP
- **サーバー**: `npm run dev` (ポート3000)

## 4. プロジェクト構造

```
photocon/
├── .agent/                 # エージェント用コンテキスト (本ファイル格納)
├── photo-con.html          # LP (旧/静的)
├── photocon-system/        # メインシステム (Next.js)
│   ├── app/
│   │   ├── admin/          # 管理機能
│   │   ├── sample/         # [NEW] 新デザインサンプルページ
│   │   └── page.tsx        # 現行トップページ
│   ├── components/         # Reactコンポーネント (Hero, ActiveEvent等はここ)
│   └── ...
└── ...
```

## 5. 現状のステータス (2026-01-15 更新)

### 最新の変更: サンプルページの実装
- **目的**: ユーザー提供のデザイン案を検証するため。
- **URL**: `http://localhost:3000/sample`
- **実装内容**:
    - `app/sample/page.tsx`: 新規ルート作成。
    - `components/Hero.tsx`: 縦書きテキスト、CTA配置調整済み。
    - その他コンポーネント: `ActiveEvent`, `PastEvents`, `HowToApply`, `Prizes`, `Requirements` 作成済み。
- **デザイン調整**: ロゴ画像への差し替え、縦書きテキストの文字修正、CTAのレイアウト調整（枠外配置）を実施。

### 最新の変更: Sample O の改修 (2026-01-19)
- **URL**: `http://localhost:3000/sample-o`
- **デザイン**:
    - 全体をフラットデザインに変更。
    - **背景デザイン**: `Brand-50 (#FFF5F0)` と `White (#FFFFFF)` を交互に配置し、**斜めのディバイダー**で区切るデザインを実装。
    - **カラー**: ボタン色を `#E84D1C` に統一（Tailwind設定の問題回避のためハードコード対応中）。
    - **Hero調整**: スクロールインジケーターを中央ロゴ下に移動し、ロゴバッジ内の不要な文言を削除。テキストとボタンの配置を入れ替え（テキスト上がメイン）。
    - **Hero調整**: スクロールインジケーターを中央ロゴ下に移動し、ロゴバッジ内の不要な文言を削除。テキストとボタンの配置を入れ替え（テキスト上がメイン）。
    - **Hero調整**: スクロールインジケーターを中央ロゴ下に移動し、ロゴバッジ内の不要な文言を削除。テキストとボタンの配置を入れ替え（テキスト上がメイン）。
    - **その他**: `HowToApplyO` と `ActiveEventsO` のアニメーションを修正。ボタン文言を「詳細・応募はこちら」→「応募する」に変更してシンプル化。
    - **FAQ**: 「チャット・タイムライン形式（ソフトブランド）」を実装。バッジ（Question/Answer）のサイズを拡大かつ極太字にし、視認性を最大化。
    - **モバイルメニュー**: スクロールロック機能実装時のビルドエラーを修正し、正常に機能するように復旧。透過度は70%を維持。
    - **ヘッダー**: ロゴサイズをPC/SP共に拡大。特にスマホ版はさらに1.5倍（w-60）に設定し、インパクトを強化。
- **コンポーネント**: `HeroO`, `ActiveEventsO`, `HowToApplyO`, `FAQO` 等を更新。

## 6. 今後の課題 / TODO
- サンプルデザインの本番適用（ユーザー指示待ち）。
- 既存ページ (`/`) との統合検討。
