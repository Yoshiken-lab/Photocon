<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kids Photo Contest - ã‚¹ãƒãƒ›ã§å‚åŠ ã™ã‚‹å†™çœŸå±•</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@400;500&family=Noto+Sans+JP:wght@400;500;700;900&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            DEFAULT: '#E84D1C',
                            50: '#FFF5F2',   // å„ªã—ã„èƒŒæ™¯è‰²
                            100: '#FFE8E0',
                            200: '#FFD4C4',
                            600: '#D63E0F',
                        },
                        text: {
                            main: '#4A4A4A', // çœŸã£é»’ã§ã¯ãªãæŸ”ã‚‰ã‹ã„ã‚°ãƒ¬ãƒ¼
                            light: '#888888'
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                        maru: ['"Kiwi Maru"', 'serif'], // è¦ªã—ã¿ã‚„ã™ã„ä¸¸ã¿ã®ã‚ã‚‹ãƒ•ã‚©ãƒ³ãƒˆ
                    },
                    borderRadius: {
                        '4xl': '2.5rem',
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; }
        .font-maru { font-family: 'Kiwi Maru', serif; }
        html { scroll-behavior: smooth; }
        
        /* æµ®éŠã™ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
    </style>
</head>
<body class="bg-brand-50 text-text-main antialiased selection:bg-brand-100 selection:text-brand-600">

    <header class="fixed top-0 w-full z-50 bg-white/80 backdrop-blur-md border-b border-white/50 transition-all duration-300">
        <div class="max-w-6xl mx-auto px-4 md:px-6 h-16 md:h-20 flex items-center justify-between">
            <a href="#" class="flex items-center group">
                <img src="logo.png" alt="ã‚¹ã‚¯ãƒ¼ãƒ«ãƒ•ã‚©ãƒˆ!" class="h-8 md:h-10 transition-transform group-hover:scale-105">
            </a>
            
            <nav class="hidden md:flex items-center gap-6 text-sm font-bold text-gray-500">
                <a href="#about" class="hover:text-brand transition-colors py-2">ã¯ã˜ã‚ã¦ã®æ–¹ã¸</a>
                <a href="#entry" class="hover:text-brand transition-colors py-2">ã‚¤ãƒ™ãƒ³ãƒˆ</a>
                <a href="#login" class="ml-2 px-6 py-2.5 bg-brand text-white rounded-full hover:bg-brand-600 transition-all duration-300 text-xs font-bold tracking-wide shadow-md hover:shadow-brand/30 hover:-translate-y-0.5">
                    ãƒ­ã‚°ã‚¤ãƒ³
                </a>
            </nav>
            
            <button class="md:hidden p-2 text-gray-600 bg-white rounded-full shadow-sm">
                <i data-lucide="menu" class="w-5 h-5"></i>
            </button>
        </div>
    </header>

    <main>
        <section class="pt-28 pb-16 md:pt-40 md:pb-24 px-4 overflow-hidden">
            <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-12 md:gap-16 items-center">
                
                <div class="space-y-6 relative z-10 order-2 md:order-1 text-center md:text-left">
                    <div class="inline-flex items-center gap-2 px-4 py-1.5 bg-white text-brand text-xs font-bold rounded-full shadow-sm border border-brand-100">
                        <span class="text-orange-400">â˜…</span>
                        <span>ã‚¹ãƒãƒ›ã«ã‚ã‚‹ãã®1æšã§OK</span>
                    </div>
                    
                    <h1 class="text-3xl md:text-5xl lg:text-6xl font-black leading-tight tracking-tight text-gray-800 font-maru">
                        ã‚ã®æ—¥ã®ä¸€ç¬ã‚’ã€<br />
                        <span class="text-brand inline-block relative">
                            æœªæ¥ã®å®ç‰©
                            <svg class="absolute w-full h-3 -bottom-1 left-0 text-brand/20 -z-10" viewBox="0 0 100 10" preserveAspectRatio="none"><path d="M0 5 Q 50 10 100 5" stroke="currentColor" stroke-width="8" fill="none" /></svg>
                        </span>
                        ã«ã€‚
                    </h1>
                    
                    <p class="text-gray-500 leading-relaxed max-w-md mx-auto md:mx-0 font-medium text-sm md:text-base">
                        é‹å‹•ä¼šã®ãŒã‚“ã°ã£ãŸé¡”ã€ãŠå¼å½“ã‚’ã»ãŠã°ã‚‹ç¬‘é¡”ã€‚<br>
                        ã‚¹ãƒãƒ›ã®ä¸­ã«çœ ã£ã¦ã„ã‚‹ãŠå­ã•ã¾ã®ãƒ™ã‚¹ãƒˆã‚·ãƒ§ãƒƒãƒˆã‚’<br>
                        ã¿ã‚“ãªã§ã‚·ã‚§ã‚¢ã—ã¦æ¥½ã—ã¿ã¾ã›ã‚“ã‹ï¼Ÿ
                    </p>
                    
                    <div class="flex flex-col sm:flex-row items-center justify-center md:justify-start gap-4 pt-4">
                        <a href="#entry" class="w-full sm:w-auto px-8 py-4 bg-brand hover:bg-brand-600 text-white rounded-full font-bold transition-all flex items-center justify-center gap-2 shadow-xl shadow-brand/20 hover:-translate-y-1">
                            <i data-lucide="camera" class="w-5 h-5"></i>
                            <span>å†™çœŸã‚’å¿œå‹Ÿã™ã‚‹</span>
                        </a>
                        <a href="#gallery" class="w-full sm:w-auto px-8 py-4 bg-white border-2 border-brand-100 hover:border-brand hover:text-brand text-gray-600 rounded-full font-bold transition-all flex items-center justify-center gap-2">
                            ä½œå“ã‚’è¦‹ã‚‹
                        </a>
                    </div>

                    <p class="text-xs text-gray-400 pt-2">â€» ç™»éŒ²ã¯ç„¡æ–™ã§ã™ã€‚1åˆ†ã§å®Œäº†ã—ã¾ã™ã€‚</p>
                </div>
                
                <div class="relative order-1 md:order-2 px-4 md:px-0">
                    <div class="absolute top-0 right-0 w-48 h-48 bg-yellow-200 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-float"></div>
                    <div class="absolute bottom-0 left-0 w-48 h-48 bg-brand-200 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-float" style="animation-delay: 2s;"></div>

                    <div class="relative aspect-[4/3] md:aspect-square bg-white rounded-[2.5rem] overflow-hidden shadow-2xl shadow-brand/10 border-[6px] border-white transform rotate-2 hover:rotate-0 transition-transform duration-700">
                        <img 
                            src="https://images.unsplash.com/photo-1503454537195-1dcabb73ffb9?w=800&q=80"
                            alt="å…¬åœ’ã§éŠã¶å­ã©ã‚‚"
                            class="w-full h-full object-cover hover:scale-105 transition-transform duration-1000 ease-out"
                        />
                        
                        <div class="absolute top-6 right-6 bg-white/90 backdrop-blur px-4 py-2 rounded-2xl shadow-lg border border-white/50 flex flex-col items-center text-center rotate-12">
                            <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Theme</span>
                            <span class="text-brand font-bold font-maru">ã€Œæœ€é«˜ã®ç¬‘é¡”ã€</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="py-20 bg-white rounded-t-[3rem] shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.05)]">
            <div class="max-w-6xl mx-auto px-4">
                <div class="text-center max-w-2xl mx-auto mb-16">
                    <span class="text-brand font-bold text-sm bg-brand-50 px-3 py-1 rounded-full mb-3 inline-block">ã‹ã‚“ãŸã‚“ 3ã‚¹ãƒ†ãƒƒãƒ—</span>
                    <h2 class="text-2xl md:text-3xl font-bold tracking-tight text-gray-800 font-maru mb-4">ãƒãƒãƒ»ãƒ‘ãƒ‘ã®ãŸã‚ã®<br>ã‚„ã•ã—ã„ã‚³ãƒ³ãƒ†ã‚¹ãƒˆ</h2>
                    <p class="text-gray-500 text-sm">é›£ã—ã„æ“ä½œã¯ã„ã‚Šã¾ã›ã‚“ã€‚<br>ã„ã¤ã‚‚ã®ã‚¹ãƒãƒ›æ“ä½œã ã‘ã§å‚åŠ ã§ãã¾ã™ã€‚</p>
                </div>

                <div class="grid md:grid-cols-3 gap-6 md:gap-10">
                    <div class="text-center group">
                        <div class="w-20 h-20 mx-auto bg-brand-50 rounded-2xl flex items-center justify-center text-brand mb-6 transition-transform group-hover:scale-110 rotate-3 group-hover:rotate-6">
                            <i data-lucide="image-plus" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-lg font-bold mb-3 font-maru">1. å†™çœŸã‚’é¸ã¶</h3>
                        <p class="text-gray-500 text-sm leading-7">ã‚¹ãƒãƒ›ã®ã‚¢ãƒ«ãƒãƒ ã‹ã‚‰ã€<br>ãŠæ°—ã«å…¥ã‚Šã®1æšã‚’é¸ã³ã¾ã™ã€‚</p>
                    </div>

                    <div class="text-center group">
                        <div class="relative w-20 h-20 mx-auto bg-brand-50 rounded-2xl flex items-center justify-center text-brand mb-6 transition-transform group-hover:scale-110 -rotate-2 group-hover:-rotate-6">
                             <div class="absolute -right-2 -top-2 bg-yellow-400 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-sm">!</div>
                            <i data-lucide="instagram" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-lg font-bold mb-3 font-maru">2. ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
                        <p class="text-gray-500 text-sm leading-7">ãã®ã¾ã¾ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‹ã€<br>Instagramã§ã‚¿ã‚°ä»˜ã‘æŠ•ç¨¿ã§ã‚‚OKã€‚</p>
                    </div>

                    <div class="text-center group">
                        <div class="w-20 h-20 mx-auto bg-brand-50 rounded-2xl flex items-center justify-center text-brand mb-6 transition-transform group-hover:scale-110 rotate-3 group-hover:rotate-6">
                            <i data-lucide="heart" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-lg font-bold mb-3 font-maru">3. ã¿ã‚“ãªã§å¿œæ´</h3>
                        <p class="text-gray-500 text-sm leading-7">ç´ æ•µãªä½œå“ã«ãƒãƒ¼ãƒˆã‚’é€ã‚ã†ã€‚<br>å…¥è³ä½œå“ã¯ã‚µã‚¤ãƒˆã§è¡¨å½°ï¼</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ã‚¤ãƒ™ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section id="entry" class="py-20 px-4 bg-white">
            <div class="max-w-6xl mx-auto">

                <!-- é–‹å‚¬ä¸­ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆãƒ’ãƒ¼ãƒ­ãƒ¼ï¼‰ -->
                <div id="active-events-container" class="mb-16">
                    <div class="flex items-center gap-3 mb-8">
                        <span class="relative flex h-3 w-3">
                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-brand opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-brand"></span>
                        </span>
                        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 font-maru">é–‹å‚¬ä¸­ã®ã‚¤ãƒ™ãƒ³ãƒˆ</h2>
                    </div>

                    <div id="active-events" class="space-y-6">
                        <!-- å‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ -->
                        <div class="text-center py-12 text-gray-400">
                            <div class="animate-pulse">èª­ã¿è¾¼ã¿ä¸­...</div>
                        </div>
                    </div>
                </div>

                <!-- ä»Šå¾Œã®äºˆå®šï¼ˆæŠ˜ã‚ŠãŸãŸã¿å¼ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼‰ -->
                <div id="upcoming-events-container" class="mb-16 hidden">
                    <button id="upcoming-toggle" class="w-full flex items-center justify-between p-4 bg-brand-50 hover:bg-brand-100 rounded-2xl transition-colors group">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-white rounded-xl flex items-center justify-center text-brand shadow-sm">
                                <i data-lucide="calendar-range" class="w-5 h-5"></i>
                            </div>
                            <div class="text-left">
                                <h3 class="font-bold text-gray-800 font-maru">ä»Šå¾Œã®äºˆå®š</h3>
                                <p id="upcoming-count" class="text-xs text-gray-500">0ä»¶ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒäºˆå®šã•ã‚Œã¦ã„ã¾ã™</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2 text-brand font-bold text-sm">
                            <span id="upcoming-toggle-text">é–‹ã</span>
                            <i data-lucide="chevron-down" id="upcoming-toggle-icon" class="w-5 h-5 transition-transform"></i>
                        </div>
                    </button>

                    <div id="upcoming-content" class="hidden mt-4">
                        <!-- PC: æ¨ªã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ -->
                        <div class="hidden md:block bg-white rounded-2xl p-8 shadow-lg border border-brand-50">
                            <div class="relative">
                                <div class="absolute top-6 left-0 right-0 h-1 bg-brand-100 rounded-full"></div>
                                <div id="upcoming-timeline-pc" class="relative flex justify-between">
                                    <!-- å‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ -->
                                </div>
                            </div>
                        </div>

                        <!-- ã‚¹ãƒãƒ›: ç¸¦ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ -->
                        <div class="md:hidden bg-white rounded-2xl p-6 shadow-lg border border-brand-50">
                            <div class="relative pl-8">
                                <div class="absolute top-0 bottom-0 left-[14px] w-1 bg-brand-100 rounded-full"></div>
                                <div id="upcoming-timeline-mobile">
                                    <!-- å‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- éå»ã®ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆæ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰ -->
                <div id="ended-events-container" class="hidden">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-gray-800 font-maru flex items-center gap-2">
                            <i data-lucide="archive" class="w-5 h-5 text-gray-400"></i>
                            éå»ã®ã‚¤ãƒ™ãƒ³ãƒˆ
                        </h3>
                        <a href="#" class="text-sm text-brand font-bold hover:underline flex items-center gap-1">
                            ã™ã¹ã¦è¦‹ã‚‹ <i data-lucide="arrow-right" class="w-4 h-4"></i>
                        </a>
                    </div>

                    <div id="ended-events" class="flex gap-4 overflow-x-auto pb-4 -mx-4 px-4 snap-x snap-mandatory scrollbar-hide">
                        <!-- å‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ -->
                    </div>
                </div>

            </div>
        </section>

        <section class="py-20 px-4 bg-brand-50">
            <div class="max-w-4xl mx-auto bg-white rounded-[2.5rem] p-8 md:p-16 text-center relative overflow-hidden shadow-xl border-4 border-brand-50">
                <div class="absolute top-0 left-0 w-full h-full opacity-[0.03]" style="background-image: radial-gradient(#E84D1C 2px, transparent 2px); background-size: 20px 20px;"></div>

                <div class="relative z-10 space-y-6">
                    <div class="w-16 h-16 bg-brand-100 text-brand rounded-full flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="gift" class="w-8 h-8"></i>
                    </div>

                    <h2 class="text-2xl md:text-4xl font-bold text-gray-800 font-maru">
                        è‡ªæ…¢ã®ä¸€æšã€å¾…ã£ã¦ã¾ã™
                    </h2>
                    <p class="text-gray-500 max-w-lg mx-auto text-sm md:text-base">
                        å…¥è³è€…ã«ã¯ã€Œå®¶æ—ã§ä½¿ãˆã‚‹ãŠé£Ÿäº‹åˆ¸ã€ãªã©<br class="hidden md:block">
                        ç´ æ•µãªãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚
                    </p>
                    <div class="pt-4">
                        <a href="#entry" class="inline-block px-12 py-4 bg-brand hover:bg-brand-600 text-white rounded-full font-bold text-lg transition-all shadow-lg shadow-brand/30 hover:-translate-y-1">
                            ç„¡æ–™ã§å‚åŠ ã™ã‚‹
                        </a>
                    </div>
                    <p class="text-xs text-gray-400 mt-4">å‹Ÿé›†æœŸé–“ï¼š2025å¹´12æœˆ31æ—¥ã¾ã§</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white text-gray-500 py-12 border-t border-brand-100 text-sm">
        <div class="max-w-6xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="flex items-center">
                <img src="logo.png" alt="ã‚¹ã‚¯ãƒ¼ãƒ«ãƒ•ã‚©ãƒˆ!" class="h-6 md:h-8">
            </div>
            
            <div class="flex flex-wrap justify-center gap-6 text-xs md:text-sm">
                <a href="#" class="hover:text-brand transition-colors">ã‚ˆãã‚ã‚‹è³ªå•</a>
                <a href="#" class="hover:text-brand transition-colors">åˆ©ç”¨è¦ç´„</a>
                <a href="#" class="hover:text-brand transition-colors">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
                <a href="#" class="hover:text-brand transition-colors">é‹å–¶ä¼šç¤¾</a>
            </div>

            <p class="text-xs text-gray-400">&copy; 2025 Kids Photo Project.</p>
        </div>
    </footer>

    <script>
        lucide.createIcons();

        // API URLï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
        const API_BASE_URL = 'http://localhost:3000';

        // æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return `${date.getMonth() + 1}/${date.getDate()}`;
        }

        function formatMonth(dateStr) {
            const date = new Date(dateStr);
            return `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ`;
        }

        // æ®‹ã‚Šæ—¥æ•°è¨ˆç®—
        function getDaysLeft(endDateStr) {
            const now = new Date();
            const endDate = new Date(endDateStr);
            const diff = Math.ceil((endDate - now) / (1000 * 60 * 60 * 24));
            return diff > 0 ? diff : 0;
        }

        // é–‹å‚¬ä¸­ã‚¤ãƒ™ãƒ³ãƒˆã®HTMLç”Ÿæˆ
        function renderActiveEvent(contest) {
            const defaultImage = 'https://images.unsplash.com/photo-1503454537195-1dcabb73ffb9?w=800&q=80';
            const daysLeft = getDaysLeft(contest.end_date);

            return `
                <div class="relative bg-gradient-to-br from-brand-50 to-white rounded-[2rem] p-6 md:p-10 shadow-xl border-2 border-brand-100 overflow-hidden">
                    <div class="absolute top-0 right-0 w-64 h-64 bg-brand-100 rounded-full mix-blend-multiply filter blur-3xl opacity-50 -translate-y-1/2 translate-x-1/2"></div>
                    <div class="relative z-10 grid md:grid-cols-2 gap-8 items-center">
                        <div class="space-y-4">
                            <div class="inline-flex items-center gap-2 px-3 py-1 bg-brand text-white text-xs font-bold rounded-full">
                                <i data-lucide="calendar" class="w-3 h-3"></i>
                                <span>å‹Ÿé›†ä¸­</span>
                            </div>
                            <h3 class="text-2xl md:text-3xl font-bold text-gray-800 font-maru">${contest.emoji || ''} ${contest.name}</h3>
                            ${contest.theme ? `<p class="text-gray-500 text-sm md:text-base">ãƒ†ãƒ¼ãƒï¼šã€Œ${contest.theme}ã€</p>` : ''}
                            <div class="flex flex-wrap gap-4 text-sm text-gray-500">
                                <div class="flex items-center gap-1">
                                    <i data-lucide="calendar-days" class="w-4 h-4 text-brand"></i>
                                    <span>${formatDate(contest.start_date)} ã€œ ${formatDate(contest.end_date)}</span>
                                </div>
                                <div class="flex items-center gap-1">
                                    <i data-lucide="users" class="w-4 h-4 text-brand"></i>
                                    <span>å¿œå‹Ÿ ${contest.entry_count || 0}ä»¶</span>
                                </div>
                                <div class="flex items-center gap-1">
                                    <i data-lucide="clock" class="w-4 h-4 text-brand"></i>
                                    <span>æ®‹ã‚Š ${daysLeft}æ—¥</span>
                                </div>
                            </div>
                            <div class="pt-4">
                                <a href="#" class="inline-flex items-center gap-2 px-8 py-4 bg-brand hover:bg-brand-600 text-white rounded-full font-bold transition-all shadow-lg shadow-brand/30 hover:-translate-y-1">
                                    <i data-lucide="camera" class="w-5 h-5"></i>
                                    <span>ä»Šã™ãå¿œå‹Ÿã™ã‚‹</span>
                                </a>
                            </div>
                        </div>
                        <div class="relative aspect-[4/3] rounded-2xl overflow-hidden shadow-lg">
                            <img src="${contest.image_url || defaultImage}" alt="${contest.name}" class="w-full h-full object-cover">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"></div>
                        </div>
                    </div>
                </div>
            `;
        }

        // ä»Šå¾Œã®äºˆå®šï¼ˆPCï¼‰ã®HTMLç”Ÿæˆ
        function renderUpcomingTimelinePC(contests) {
            const width = contests.length > 0 ? `w-1/${contests.length}` : 'w-full';
            return contests.map(contest => `
                <div class="flex flex-col items-center ${width}">
                    <div class="w-12 h-12 bg-white border-4 border-brand-200 rounded-full flex items-center justify-center text-2xl shadow-sm z-10">
                        <span>${contest.emoji || 'ğŸ“…'}</span>
                    </div>
                    <div class="mt-4 text-center">
                        <p class="text-xs text-brand font-bold">${formatMonth(contest.start_date)}</p>
                        <h4 class="font-bold text-gray-800 font-maru mt-1">${contest.name}</h4>
                        <p class="text-xs text-gray-500 mt-1">${formatDate(contest.start_date)} ã€œ ${formatDate(contest.end_date)}</p>
                        <span class="inline-block mt-2 px-2 py-1 bg-gray-100 text-gray-500 text-xs rounded-full">Coming Soon</span>
                    </div>
                </div>
            `).join('');
        }

        // ä»Šå¾Œã®äºˆå®šï¼ˆã‚¹ãƒãƒ›ï¼‰ã®HTMLç”Ÿæˆ
        function renderUpcomingTimelineMobile(contests) {
            return contests.map((contest, index) => `
                <div class="relative ${index < contests.length - 1 ? 'pb-8' : ''}">
                    <div class="absolute left-[-22px] w-8 h-8 bg-white border-4 border-brand-200 rounded-full flex items-center justify-center text-lg z-10">
                        <span>${contest.emoji || 'ğŸ“…'}</span>
                    </div>
                    <div class="bg-brand-50 rounded-xl p-4">
                        <p class="text-xs text-brand font-bold">${formatMonth(contest.start_date)}</p>
                        <h4 class="font-bold text-gray-800 font-maru mt-1">${contest.name}</h4>
                        <p class="text-xs text-gray-500 mt-1">${formatDate(contest.start_date)} ã€œ ${formatDate(contest.end_date)}</p>
                        <span class="inline-block mt-2 px-2 py-1 bg-white text-gray-500 text-xs rounded-full">Coming Soon</span>
                    </div>
                </div>
            `).join('');
        }

        // éå»ã®ã‚¤ãƒ™ãƒ³ãƒˆã®HTMLç”Ÿæˆ
        function renderEndedEvent(contest) {
            const defaultImage = 'https://images.unsplash.com/photo-1503454537195-1dcabb73ffb9?w=400&q=80';
            return `
                <div class="flex-shrink-0 w-64 snap-start">
                    <div class="bg-white rounded-2xl overflow-hidden shadow-md hover:shadow-lg transition-shadow border border-gray-100">
                        <div class="relative aspect-[3/2]">
                            <img src="${contest.image_url || defaultImage}" alt="${contest.name}" class="w-full h-full object-cover">
                            <div class="absolute top-3 left-3">
                                <span class="bg-gray-800/70 text-white text-xs font-bold px-2 py-1 rounded-full">çµ‚äº†</span>
                            </div>
                        </div>
                        <div class="p-4">
                            <p class="text-xs text-gray-400">${formatMonth(contest.end_date)}</p>
                            <h4 class="font-bold text-gray-800 font-maru mt-1">${contest.emoji || ''} ${contest.name}</h4>
                            <div class="flex items-center gap-3 mt-2 text-xs text-gray-500">
                                <span class="flex items-center gap-1"><i data-lucide="image" class="w-3 h-3"></i> ${contest.entry_count || 0}ä»¶</span>
                                <span class="flex items-center gap-1"><i data-lucide="heart" class="w-3 h-3"></i> ${(contest.total_votes || 0).toLocaleString()}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦è¡¨ç¤º
        async function loadEvents() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/contests?type=lp`);
                const data = await response.json();

                // é–‹å‚¬ä¸­ã‚¤ãƒ™ãƒ³ãƒˆ
                const activeContainer = document.getElementById('active-events');
                if (data.active && data.active.length > 0) {
                    activeContainer.innerHTML = data.active.map(renderActiveEvent).join('');
                } else {
                    activeContainer.innerHTML = `
                        <div class="text-center py-12 bg-brand-50 rounded-2xl text-gray-500">
                            ç¾åœ¨é–‹å‚¬ä¸­ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“
                        </div>
                    `;
                }

                // ä»Šå¾Œã®äºˆå®š
                const upcomingContainer = document.getElementById('upcoming-events-container');
                if (data.upcoming && data.upcoming.length > 0) {
                    upcomingContainer.classList.remove('hidden');
                    document.getElementById('upcoming-count').textContent = `${data.upcoming.length}ä»¶ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒäºˆå®šã•ã‚Œã¦ã„ã¾ã™`;
                    document.getElementById('upcoming-timeline-pc').innerHTML = renderUpcomingTimelinePC(data.upcoming);
                    document.getElementById('upcoming-timeline-mobile').innerHTML = renderUpcomingTimelineMobile(data.upcoming);
                }

                // éå»ã®ã‚¤ãƒ™ãƒ³ãƒˆ
                const endedContainer = document.getElementById('ended-events-container');
                if (data.ended && data.ended.length > 0) {
                    endedContainer.classList.remove('hidden');
                    document.getElementById('ended-events').innerHTML = data.ended.map(renderEndedEvent).join('');
                }

                // Lucideã‚¢ã‚¤ã‚³ãƒ³ã‚’å†æç”»
                lucide.createIcons();
            } catch (error) {
                console.error('ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                document.getElementById('active-events').innerHTML = `
                    <div class="text-center py-12 bg-brand-50 rounded-2xl text-gray-500">
                        ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸ
                    </div>
                `;
            }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—
        loadEvents();

        // ä»Šå¾Œã®äºˆå®šã®æŠ˜ã‚ŠãŸãŸã¿æ©Ÿèƒ½
        const upcomingToggle = document.getElementById('upcoming-toggle');
        const upcomingContent = document.getElementById('upcoming-content');
        const upcomingToggleText = document.getElementById('upcoming-toggle-text');
        const upcomingToggleIcon = document.getElementById('upcoming-toggle-icon');

        upcomingToggle.addEventListener('click', () => {
            const isHidden = upcomingContent.classList.contains('hidden');

            if (isHidden) {
                upcomingContent.classList.remove('hidden');
                upcomingToggleText.textContent = 'é–‰ã˜ã‚‹';
                upcomingToggleIcon.style.transform = 'rotate(180deg)';
            } else {
                upcomingContent.classList.add('hidden');
                upcomingToggleText.textContent = 'é–‹ã';
                upcomingToggleIcon.style.transform = 'rotate(0deg)';
            }

            // ã‚¢ã‚¤ã‚³ãƒ³ã‚’å†æç”»
            lucide.createIcons();
        });
    </script>
</body>
</html>